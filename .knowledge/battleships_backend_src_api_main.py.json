{"is_source_file": true, "format": "Python", "description": "This is the main backend source file for a Battleships web game API built with FastAPI. It defines the API endpoints, data models, game logic, and in-memory state management for creating and playing battleship games with support for PvP and PvE modes.", "external_files": ["fastapi", "fastapi.middleware.cors", "pydantic", "typing", "random", "string"], "external_methods": ["FastAPI", "HTTPException", "CORSMiddleware", "BaseModel", "Field", "random.choice", "random.randint"], "published": ["create_game", "join_game", "place_ships", "get_game_state", "fire", "health_check", "rules"], "classes": [{"name": "Coord", "description": "A 0-indexed board coordinate with row and column indices."}, {"name": "ShipPlacement", "description": "Represents a ship placement instruction including start coordinate, orientation, and length."}, {"name": "PlaceShipsRequest", "description": "Request model to place ships with player ID and list of ship placements."}, {"name": "CreateGameRequest", "description": "Request to create a new game with specified mode and board size."}, {"name": "CreateGameResponse", "description": "Response model for game creation containing game and player IDs."}, {"name": "JoinGameRequest", "description": "Request model to join an existing PvP game."}, {"name": "JoinGameResponse", "description": "Response after joining a game with game ID and player2 ID."}, {"name": "FireRequest", "description": "Request model for firing at a coordinate, including player ID and target coordinate."}, {"name": "FireResult", "description": "Outcome of a firing action, including result, coordinate, sunk ship length, and winner info."}, {"name": "CellView", "description": "Representation of a single cell in the game view."}, {"name": "GameStateResponse", "description": "Full game state presentation tailored for a particular player."}], "methods": [{"name": "str _new_id(prefix: str, n: int = 8)", "description": "Generate a random unique ID with a specified prefix.", "scope": "", "scopeKind": ""}, {"name": "bool _in_bounds(r: int, c: int)", "description": "Check if given row and column are within board bounds.", "scope": "", "scopeKind": ""}, {"name": "List[Tuple[int,int]] _coords_for_ship(start: Coord, orientation: str, length: int)", "description": "Calculate grid coordinates for a ship placement based on start, orientation, and length.", "scope": "", "scopeKind": ""}, {"name": "None _place_fleet(player: PlayerState, ships: List[ShipPlacement])", "description": "Place a fleet of ships on a player's board, ensuring no overlaps and valid placement.", "scope": "", "scopeKind": ""}, {"name": "Tuple[str,Optional[int]] _apply_shot(defender: PlayerState, target: Tuple[int, int])", "description": "Apply a shot to a defender's board and return the result (hit, miss, sunk, repeat).", "scope": "", "scopeKind": ""}, {"name": "Tuple[int,int] _ai_pick_shot(attacker: PlayerState, defender: PlayerState)", "description": "Simple AI logic for selecting the next shot based on previous hits.", "scope": "", "scopeKind": ""}, {"name": "List[List[str]] _board_view_for_owner(player: PlayerState)", "description": "Generate a view of the player's own board including ships, hits, and misses.", "scope": "", "scopeKind": ""}, {"name": "List[List[str]] _board_view_for_opponent(defender: PlayerState)", "description": "Generate a view of the opponent's board with only hits and misses, hiding ships.", "scope": "", "scopeKind": ""}, {"name": "GameStateResponse _state_for_player(game: Game, player_id: str)", "description": "Generate the game state response tailored to a specific player.", "scope": "", "scopeKind": ""}, {"name": "Game _get_game(game_id: str)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Literal[\"P1\",\"P2\"] _opponent_side(side: Literal[\"P1\", \"P2\"])", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "PlayerState _player_state(game: Game, side: Literal[\"P1\", \"P2\"])", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Literal[\"P1\",\"P2\"] _side_for_player(game: Game, player_id: str)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "None _validate_fleet_lengths(ships: List[ShipPlacement])", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "CreateGameResponse create_game(req: CreateGameRequest)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "FireResult fire(game_id: str, req: FireRequest)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "GameStateResponse get_game_state(game_id: str, player_id: str)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "health_check()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "bool is_sunk(self)", "scope": "Ship", "scopeKind": "class", "description": "unavailable"}, {"name": "JoinGameResponse join_game(game_id: str, req: JoinGameRequest)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Literal[\"placement\",\"battle\",\"finished\"] phase(self)", "scope": "Game", "scopeKind": "class", "description": "unavailable"}, {"name": "place_ships(game_id: str, req: PlaceShipsRequest)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int remaining_ships(self)", "scope": "PlayerState", "scopeKind": "class", "description": "unavailable"}, {"name": "rules()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["/", "/rules", "/games", "/games/{game_id}/join", "/games/{game_id}/place-ships", "/games/{game_id}/state", "/games/{game_id}/fire"], "search-terms": ["Battleships", "FastAPI", "game creation", "ship placement", "PvP", "PvE", "turn-based", "AI opponent", "in-memory game state", "REST API"], "state": 2, "file_id": 2, "knowledge_revision": 10, "git_revision": "c9675b9403104fc4c833cbd2c9c3dbfc3af4eefb", "revision_history": [{"8": "c9675b9403104fc4c833cbd2c9c3dbfc3af4eefb"}, {"10": "c9675b9403104fc4c833cbd2c9c3dbfc3af4eefb"}], "ctags": [{"_type": "tag", "name": "BOARD_SIZE", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^BOARD_SIZE = 10$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "CellView", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^class CellView(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Coord", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^class Coord(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "CreateGameRequest", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^class CreateGameRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "CreateGameResponse", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^class CreateGameResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "FLEET_LENGTHS", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^FLEET_LENGTHS = [5, 4, 3, 3, 2]$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "FireRequest", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^class FireRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "FireResult", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^class FireResult(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "GAMES", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^GAMES: Dict[str, Game] = {}$/", "language": "Python", "typeref": "typename:Dict[str, Game]", "kind": "variable"}, {"_type": "tag", "name": "Game", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^class Game:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "GameStateResponse", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^class GameStateResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "JoinGameRequest", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^class JoinGameRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "JoinGameResponse", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^class JoinGameResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "PlaceShipsRequest", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^class PlaceShipsRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "PlayerState", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^class PlayerState:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Ship", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^class Ship:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ShipPlacement", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^class ShipPlacement(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_ai_pick_shot", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^def _ai_pick_shot(attacker: PlayerState, defender: PlayerState) -> Tuple[int, int]:$/", "language": "Python", "typeref": "typename:Tuple[int,int]", "kind": "function", "signature": "(attacker: PlayerState, defender: PlayerState)"}, {"_type": "tag", "name": "_apply_shot", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^def _apply_shot(defender: PlayerState, target: Tuple[int, int]) -> Tuple[str, Optional[int]]:$/", "language": "Python", "typeref": "typename:Tuple[str,Optional[int]]", "kind": "function", "signature": "(defender: PlayerState, target: Tuple[int, int])"}, {"_type": "tag", "name": "_board_view_for_opponent", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^def _board_view_for_opponent(defender: PlayerState) -> List[List[str]]:$/", "language": "Python", "typeref": "typename:List[List[str]]", "kind": "function", "signature": "(defender: PlayerState)"}, {"_type": "tag", "name": "_board_view_for_owner", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^def _board_view_for_owner(player: PlayerState) -> List[List[str]]:$/", "language": "Python", "typeref": "typename:List[List[str]]", "kind": "function", "signature": "(player: PlayerState)"}, {"_type": "tag", "name": "_coords_for_ship", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^def _coords_for_ship(start: Coord, orientation: str, length: int) -> List[Tuple[int, int]]:$/", "language": "Python", "typeref": "typename:List[Tuple[int,int]]", "kind": "function", "signature": "(start: Coord, orientation: str, length: int)"}, {"_type": "tag", "name": "_get_game", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^def _get_game(game_id: str) -> Game:$/", "language": "Python", "typeref": "typename:Game", "kind": "function", "signature": "(game_id: str)"}, {"_type": "tag", "name": "_in_bounds", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^def _in_bounds(r: int, c: int) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "function", "signature": "(r: int, c: int)"}, {"_type": "tag", "name": "_new_id", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^def _new_id(prefix: str, n: int = 8) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(prefix: str, n: int = 8)"}, {"_type": "tag", "name": "_opponent_side", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^def _opponent_side(side: Literal[\"P1\", \"P2\"]) -> Literal[\"P1\", \"P2\"]:$/", "language": "Python", "typeref": "typename:Literal[\"P1\",\"P2\"]", "kind": "function", "signature": "(side: Literal[\"P1\", \"P2\"])"}, {"_type": "tag", "name": "_place_fleet", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^def _place_fleet(player: PlayerState, ships: List[ShipPlacement]) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(player: PlayerState, ships: List[ShipPlacement])"}, {"_type": "tag", "name": "_player_state", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^def _player_state(game: Game, side: Literal[\"P1\", \"P2\"]) -> PlayerState:$/", "language": "Python", "typeref": "typename:PlayerState", "kind": "function", "signature": "(game: Game, side: Literal[\"P1\", \"P2\"])"}, {"_type": "tag", "name": "_side_for_player", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^def _side_for_player(game: Game, player_id: str) -> Literal[\"P1\", \"P2\"]:$/", "language": "Python", "typeref": "typename:Literal[\"P1\",\"P2\"]", "kind": "function", "signature": "(game: Game, player_id: str)"}, {"_type": "tag", "name": "_state_for_player", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^def _state_for_player(game: Game, player_id: str) -> GameStateResponse:$/", "language": "Python", "typeref": "typename:GameStateResponse", "kind": "function", "signature": "(game: Game, player_id: str)"}, {"_type": "tag", "name": "_validate_fleet_lengths", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^def _validate_fleet_lengths(ships: List[ShipPlacement]) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(ships: List[ShipPlacement])"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "at", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    at: Coord = Field(..., description=\"Target coordinate.\")$/", "language": "Python", "typeref": "typename:Coord", "kind": "variable", "scope": "FireResult", "scopeKind": "class"}, {"_type": "tag", "name": "board_size", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    board_size: int = Field(10, ge=10, le=10, description=\"Board size; currently fixed at 10.\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "CreateGameRequest", "scopeKind": "class"}, {"_type": "tag", "name": "col", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    col: int = Field(..., description=\"Column index.\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "CellView", "scopeKind": "class"}, {"_type": "tag", "name": "col", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    col: int = Field(..., ge=0, le=9, description=\"Column index, 0-9.\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "Coord", "scopeKind": "class"}, {"_type": "tag", "name": "coord", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    coord: Coord = Field(..., description=\"Target coordinate.\")$/", "language": "Python", "typeref": "typename:Coord", "kind": "variable", "scope": "FireRequest", "scopeKind": "class"}, {"_type": "tag", "name": "create_game", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^def create_game(req: CreateGameRequest) -> CreateGameResponse:$/", "language": "Python", "typeref": "typename:CreateGameResponse", "kind": "function", "signature": "(req: CreateGameRequest)"}, {"_type": "tag", "name": "fire", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^def fire(game_id: str, req: FireRequest) -> FireResult:$/", "language": "Python", "typeref": "typename:FireResult", "kind": "function", "signature": "(game_id: str, req: FireRequest)"}, {"_type": "tag", "name": "game_id", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    game_id: str = Field(..., description=\"Game id to join.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "JoinGameRequest", "scopeKind": "class"}, {"_type": "tag", "name": "game_id", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    game_id: str = Field(..., description=\"Game id.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "GameStateResponse", "scopeKind": "class"}, {"_type": "tag", "name": "game_id", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    game_id: str = Field(..., description=\"Game id.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "JoinGameResponse", "scopeKind": "class"}, {"_type": "tag", "name": "game_id", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    game_id: str = Field(..., description=\"Unique game id.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "CreateGameResponse", "scopeKind": "class"}, {"_type": "tag", "name": "get_game_state", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^def get_game_state(game_id: str, player_id: str) -> GameStateResponse:$/", "language": "Python", "typeref": "typename:GameStateResponse", "kind": "function", "signature": "(game_id: str, player_id: str)"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^def health_check():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "hits", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    hits: Set[Tuple[int, int]] = field(default_factory=set)$/", "language": "Python", "typeref": "typename:Set[Tuple[int, int]]", "kind": "variable", "scope": "Ship", "scopeKind": "class"}, {"_type": "tag", "name": "hits_taken", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    hits_taken: Set[Tuple[int, int]] = field(default_factory=set)  # opponent fired and hit$/", "language": "Python", "typeref": "typename:Set[Tuple[int, int]]", "kind": "variable", "scope": "PlayerState", "scopeKind": "class"}, {"_type": "tag", "name": "is_sunk", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    def is_sunk(self) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "member", "signature": "(self)", "scope": "Ship", "scopeKind": "class"}, {"_type": "tag", "name": "join_game", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^def join_game(game_id: str, req: JoinGameRequest) -> JoinGameResponse:$/", "language": "Python", "typeref": "typename:JoinGameResponse", "kind": "function", "signature": "(game_id: str, req: JoinGameRequest)"}, {"_type": "tag", "name": "length", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    length: int = Field(..., ge=2, le=5, description=\"Ship length. Standard set: 5,4,3,3,2.\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "ShipPlacement", "scopeKind": "class"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    message: Optional[str] = Field(None, description=\"Human-friendly status message.\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "GameStateResponse", "scopeKind": "class"}, {"_type": "tag", "name": "misses_taken", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    misses_taken: Set[Tuple[int, int]] = field(default_factory=set)  # opponent fired and missed$/", "language": "Python", "typeref": "typename:Set[Tuple[int, int]]", "kind": "variable", "scope": "PlayerState", "scopeKind": "class"}, {"_type": "tag", "name": "mode", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    mode: Literal[\"pvp\", \"pve\"] = Field(..., description=\"Game mode.\")$/", "language": "Python", "typeref": "typename:Literal[\"pvp\", \"pve\"]", "kind": "variable", "scope": "CreateGameResponse", "scopeKind": "class"}, {"_type": "tag", "name": "mode", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    mode: Literal[\"pvp\", \"pve\"] = Field(..., description=\"Game mode.\")$/", "language": "Python", "typeref": "typename:Literal[\"pvp\", \"pve\"]", "kind": "variable", "scope": "GameStateResponse", "scopeKind": "class"}, {"_type": "tag", "name": "mode", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    mode: Literal[\"pvp\", \"pve\"] = Field(..., description=\"Game mode: pvp or pve.\")$/", "language": "Python", "typeref": "typename:Literal[\"pvp\", \"pve\"]", "kind": "variable", "scope": "CreateGameRequest", "scopeKind": "class"}, {"_type": "tag", "name": "openapi_tags", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^openapi_tags = [$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "opponent_board", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    opponent_board: List[List[str]] = Field($/", "language": "Python", "typeref": "typename:List[List[str]]", "kind": "variable", "scope": "GameStateResponse", "scopeKind": "class"}, {"_type": "tag", "name": "orientation", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    orientation: Literal[\"H\", \"V\"] = Field(..., description=\"H for horizontal, V for vertical.\")$/", "language": "Python", "typeref": "typename:Literal[\"H\", \"V\"]", "kind": "variable", "scope": "ShipPlacement", "scopeKind": "class"}, {"_type": "tag", "name": "p1_ready", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    p1_ready: bool = False$/", "language": "Python", "typeref": "typename:bool", "kind": "variable", "scope": "Game", "scopeKind": "class"}, {"_type": "tag", "name": "p2_ready", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    p2_ready: bool = False$/", "language": "Python", "typeref": "typename:bool", "kind": "variable", "scope": "Game", "scopeKind": "class"}, {"_type": "tag", "name": "phase", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    def phase(self) -> Literal[\"placement\", \"battle\", \"finished\"]:$/", "language": "Python", "typeref": "typename:Literal[\"placement\",\"battle\",\"finished\"]", "kind": "member", "signature": "(self)", "scope": "Game", "scopeKind": "class"}, {"_type": "tag", "name": "phase", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    phase: Literal[\"placement\", \"battle\", \"finished\"] = Field(..., description=\"Game phase.\")$/", "language": "Python", "typeref": "typename:Literal[\"placement\", \"battle\", \"finished\"]", "kind": "variable", "scope": "GameStateResponse", "scopeKind": "class"}, {"_type": "tag", "name": "place_ships", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^def place_ships(game_id: str, req: PlaceShipsRequest):$/", "language": "Python", "kind": "function", "signature": "(game_id: str, req: PlaceShipsRequest)"}, {"_type": "tag", "name": "player1_id", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    player1_id: str = Field(..., description=\"Player 1 id.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "CreateGameResponse", "scopeKind": "class"}, {"_type": "tag", "name": "player2_id", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    player2_id: Optional[str] = Field(None, description=\"Player 2 id (PvP only).\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "CreateGameResponse", "scopeKind": "class"}, {"_type": "tag", "name": "player2_id", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    player2_id: str = Field(..., description=\"Player 2 id.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "JoinGameResponse", "scopeKind": "class"}, {"_type": "tag", "name": "player_id", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    player_id: str = Field(..., description=\"Firing player id.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "FireRequest", "scopeKind": "class"}, {"_type": "tag", "name": "player_id", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    player_id: str = Field(..., description=\"Player id returned by game creation.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "PlaceShipsRequest", "scopeKind": "class"}, {"_type": "tag", "name": "remaining_ships", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    def remaining_ships(self) -> int:$/", "language": "Python", "typeref": "typename:int", "kind": "member", "signature": "(self)", "scope": "PlayerState", "scopeKind": "class"}, {"_type": "tag", "name": "remaining_ships_opponent", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    remaining_ships_opponent: int = Field(..., description=\"How many opponent ships are still af/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "GameStateResponse", "scopeKind": "class"}, {"_type": "tag", "name": "remaining_ships_you", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    remaining_ships_you: int = Field(..., description=\"How many of your ships are still afloat.\"/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "GameStateResponse", "scopeKind": "class"}, {"_type": "tag", "name": "result", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    result: Literal[\"hit\", \"miss\", \"sunk\", \"repeat\"] = Field(..., description=\"Shot outcome.\")$/", "language": "Python", "typeref": "typename:Literal[\"hit\", \"miss\", \"sunk\", \"repeat\"]", "kind": "variable", "scope": "FireResult", "scopeKind": "class"}, {"_type": "tag", "name": "row", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    row: int = Field(..., description=\"Row index.\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "CellView", "scopeKind": "class"}, {"_type": "tag", "name": "row", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    row: int = Field(..., ge=0, le=9, description=\"Row index, 0-9.\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "Coord", "scopeKind": "class"}, {"_type": "tag", "name": "rules", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^def rules():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "ship_cells", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    ship_cells: Set[Tuple[int, int]] = field(default_factory=set)$/", "language": "Python", "typeref": "typename:Set[Tuple[int, int]]", "kind": "variable", "scope": "PlayerState", "scopeKind": "class"}, {"_type": "tag", "name": "ships", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    ships: List[ShipPlacement] = Field($/", "language": "Python", "typeref": "typename:List[ShipPlacement]", "kind": "variable", "scope": "PlaceShipsRequest", "scopeKind": "class"}, {"_type": "tag", "name": "ships", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    ships: List[Ship] = field(default_factory=list)$/", "language": "Python", "typeref": "typename:List[Ship]", "kind": "variable", "scope": "PlayerState", "scopeKind": "class"}, {"_type": "tag", "name": "shots_made", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    shots_made: Set[Tuple[int, int]] = field(default_factory=set)  # your fired coords (hit\\/mis/", "language": "Python", "typeref": "typename:Set[Tuple[int, int]]", "kind": "variable", "scope": "PlayerState", "scopeKind": "class"}, {"_type": "tag", "name": "start", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    start: Coord = Field(..., description=\"Starting coordinate for the ship (top\\/left-most).\")$/", "language": "Python", "typeref": "typename:Coord", "kind": "variable", "scope": "ShipPlacement", "scopeKind": "class"}, {"_type": "tag", "name": "sunk_ship_length", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    sunk_ship_length: Optional[int] = Field(None, description=\"Length of ship sunk, if any.\")$/", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "FireResult", "scopeKind": "class"}, {"_type": "tag", "name": "turn", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    turn: Literal[\"P1\", \"P2\"] = \"P1\"$/", "language": "Python", "typeref": "typename:Literal[\"P1\", \"P2\"]", "kind": "variable", "scope": "Game", "scopeKind": "class"}, {"_type": "tag", "name": "value", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    value: Literal[\"unknown\", \"miss\", \"hit\", \"ship\"] = Field($/", "language": "Python", "typeref": "typename:Literal[\"unknown\", \"miss\", \"hit\", \"ship\"]", "kind": "variable", "scope": "CellView", "scopeKind": "class"}, {"_type": "tag", "name": "winner", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    winner: Optional[Literal[\"P1\", \"P2\"]] = Field(None, description=\"Winner side if finished.\")$/", "language": "Python", "typeref": "typename:Optional[Literal[\"P1\", \"P2\"]]", "kind": "variable", "scope": "GameStateResponse", "scopeKind": "class"}, {"_type": "tag", "name": "winner", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    winner: Optional[Literal[\"P1\", \"P2\"]] = None$/", "language": "Python", "typeref": "typename:Optional[Literal[\"P1\", \"P2\"]]", "kind": "variable", "scope": "Game", "scopeKind": "class"}, {"_type": "tag", "name": "winner_player_id", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    winner_player_id: Optional[str] = Field(None, description=\"Winner id, if the game ended.\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "FireResult", "scopeKind": "class"}, {"_type": "tag", "name": "you_are", "path": "/home/kavia/workspace/code-generation/battleships-web-game-216474-216483/battleships_backend/src/api/main.py", "pattern": "/^    you_are: Literal[\"P1\", \"P2\"] = Field(..., description=\"Which side the requester is.\")$/", "language": "Python", "typeref": "typename:Literal[\"P1\", \"P2\"]", "kind": "variable", "scope": "GameStateResponse", "scopeKind": "class"}], "hash": "626b81b89ee7e1bd4d86dd7e1338705a", "format-version": 4, "code-base-name": "battleships_backend", "filename": "battleships_backend/src/api/main.py", "fields": [{"name": "BOARD_SIZE = 10", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "FLEET_LENGTHS = [5, 4, 3, 3, 2]", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Dict[str, Game] GAMES", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Coord at", "scope": "FireResult", "scopeKind": "class", "description": "unavailable"}, {"name": "int board_size", "scope": "CreateGameRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "int col", "scope": "CellView", "scopeKind": "class", "description": "unavailable"}, {"name": "Coord coord", "scope": "FireRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "str game_id", "scope": "JoinGameRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "Set[Tuple[int, int]] hits", "scope": "Ship", "scopeKind": "class", "description": "unavailable"}, {"name": "Set[Tuple[int, int]] hits_taken", "scope": "PlayerState", "scopeKind": "class", "description": "unavailable"}, {"name": "int length", "scope": "ShipPlacement", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] message", "scope": "GameStateResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "Set[Tuple[int, int]] misses_taken", "scope": "PlayerState", "scopeKind": "class", "description": "unavailable"}, {"name": "Literal[\"pvp\", \"pve\"] mode", "scope": "CreateGameResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "openapi_tags = [", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "List[List[str]] opponent_board", "scope": "GameStateResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "Literal[\"H\", \"V\"] orientation", "scope": "ShipPlacement", "scopeKind": "class", "description": "unavailable"}, {"name": "bool p1_ready", "scope": "Game", "scopeKind": "class", "description": "unavailable"}, {"name": "bool p2_ready", "scope": "Game", "scopeKind": "class", "description": "unavailable"}, {"name": "Literal[\"placement\", \"battle\", \"finished\"] phase", "scope": "GameStateResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "str player1_id", "scope": "CreateGameResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] player2_id", "scope": "CreateGameResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "str player2_id", "scope": "JoinGameResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "str player_id", "scope": "FireRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "int remaining_ships_opponent", "scope": "GameStateResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "int remaining_ships_you", "scope": "GameStateResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "Literal[\"hit\", \"miss\", \"sunk\", \"repeat\"] result", "scope": "FireResult", "scopeKind": "class", "description": "unavailable"}, {"name": "int row", "scope": "CellView", "scopeKind": "class", "description": "unavailable"}, {"name": "Set[Tuple[int, int]] ship_cells", "scope": "PlayerState", "scopeKind": "class", "description": "unavailable"}, {"name": "List[ShipPlacement] ships", "scope": "PlaceShipsRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "List[Ship] ships", "scope": "PlayerState", "scopeKind": "class", "description": "unavailable"}, {"name": "Set[Tuple[int, int]] shots_made", "scope": "PlayerState", "scopeKind": "class", "description": "unavailable"}, {"name": "Coord start", "scope": "ShipPlacement", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[int] sunk_ship_length", "scope": "FireResult", "scopeKind": "class", "description": "unavailable"}, {"name": "Literal[\"P1\", \"P2\"] turn", "scope": "Game", "scopeKind": "class", "description": "unavailable"}, {"name": "Literal[\"unknown\", \"miss\", \"hit\", \"ship\"] value", "scope": "CellView", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[Literal[\"P1\", \"P2\"]] winner", "scope": "GameStateResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] winner_player_id", "scope": "FireResult", "scopeKind": "class", "description": "unavailable"}, {"name": "Literal[\"P1\", \"P2\"] you_are", "scope": "GameStateResponse", "scopeKind": "class", "description": "unavailable"}]}